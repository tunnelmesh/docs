<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NFS File Sharing — TunnelMesh Docs</title>
  <link rel="icon" type="image/png" href="/img/icon.png">
  <meta name="description" content="TunnelMesh provides an NFS v3 server for mounting file shares as network drives. The NFS server is backed by S3 storage and uses TLS certificate authentication.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;450;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/base16/monokai.min.css" id="hljs-theme">
  <link rel="stylesheet" href="/css/style.css">
  <script defer src="https://cloud.umami.is/script.js" data-website-id="52ad1994-5bcf-4035-9fc1-98494b14eb2f" data-auto-track="false"></script>
  <link rel="canonical" href="https://read.tunnelmesh.io/docs/nfs/">
  <meta property="og:title" content="NFS File Sharing — TunnelMesh Docs">
  <meta property="og:description" content="TunnelMesh provides an NFS v3 server for mounting file shares as network drives. The NFS server is backed by S3 storage and uses TLS certificate authentication.">
  <meta property="og:url" content="https://read.tunnelmesh.io/docs/nfs/">
  <meta property="og:type" content="website">
</head>
<body>

<!-- ── Navigation ── -->
<nav class="nav" id="nav">
  <div class="nav-inner">

    <a href="#/docs" class="logo">
      <img src="/img/icon.png" class="logo-img" width="30" height="30" alt="TunnelMesh">
      <span class="logo-word">tunnelmesh</span>
      <span class="logo-tag">docs</span>
    </a>

    <div class="nav-center">
      <button class="nav-tab active" data-view="docs" aria-label="Documentation">
        <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
          <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
        </svg>
        Docs
      </button>
      <button class="nav-tab" data-view="blog" aria-label="Blog">
        <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M12 20h9"/>
          <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
        </svg>
        Blog
      </button>
    </div>

    <div class="nav-actions">
      <a href="https://tunnelmesh.io" class="nav-icon-link" target="_blank" rel="noopener" aria-label="TunnelMesh website" title="Website">
        <svg width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <circle cx="12" cy="12" r="10"/>
          <line x1="2" y1="12" x2="22" y2="12"/>
          <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
        </svg>
      </a>
      <a href="https://github.com/tunnelmesh/tunnelmesh" class="nav-icon-link" target="_blank" rel="noopener" aria-label="GitHub" title="GitHub">
        <svg width="17" height="17" viewBox="0 0 98 96" fill="currentColor" aria-hidden="true">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z"/>
        </svg>
      </a>
      <button class="theme-toggle" id="theme-toggle" aria-label="Toggle light/dark mode">
        <svg class="icon-sun" width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <circle cx="12" cy="12" r="5"/>
          <line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/>
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
          <line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/>
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
        </svg>
        <svg class="icon-moon" width="17" height="17" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
        </svg>
      </button>
    </div>

    <button class="hamburger" id="hamburger" aria-label="Toggle sidebar">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <line x1="3" y1="6" x2="21" y2="6"/>
        <line x1="3" y1="12" x2="21" y2="12"/>
        <line x1="3" y1="18" x2="21" y2="18"/>
      </svg>
    </button>

  </div>
</nav>

<!-- Mobile overlay -->
<div class="sidebar-overlay" id="sidebar-overlay"></div>

<!-- ── App Layout ── -->
<div class="app-wrap">

  <!-- ══ DOCS VIEW ══ -->
  <div class="view active" id="view-docs">

    <!-- Left sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-scroll">
        <div class="sidebar-section-label">Documentation</div>
        <nav id="sidebar-nav" class="sidebar-nav" aria-label="Documentation navigation"></nav>
      </div>
    </aside>

    <!-- Center content -->
    <main class="docs-main">
      <div class="docs-content">
        <article id="doc-article" class="doc-article" aria-live="polite"><h1 id="nfs-file-sharing">NFS File Sharing</h1>
<div class="callout note">
  <div class="callout-title"><span>Note</span></div>
  <div class="callout-body"><p>TunnelMesh provides an NFS v3 server for mounting file shares as network drives. The NFS server is
backed by S3 storage and uses TLS certificate authentication. <strong>Automatically enabled</strong> when file
shares exist - no manual configuration needed.</p></div>
</div>
<h2 id="overview">Overview</h2>
<p>The NFS server:</p>
<ul>
<li>Serves file shares created via the admin panel or API</li>
<li>Authenticates using TLS client certificates (same as other mesh services)</li>
<li>Respects RBAC permissions from the S3 storage layer</li>
<li>Runs on the coordinator&#39;s mesh IP on port 2049 (standard NFS port)</li>
<li>Only starts when at least one file share exists</li>
</ul>
<h2 id="prerequisites">Prerequisites</h2>
<p>NFS is automatically enabled when:</p>
<ol>
<li>The coordinator is running (S3 is always enabled on coordinators)</li>
<li>At least one file share exists</li>
</ol>
<p>No additional configuration is required.</p>
<h2 id="mounting-file-shares">Mounting File Shares</h2>
<h3 id="linux">Linux</h3>
<pre><code class="language-bash"># Install NFS client (if not already installed)
sudo apt install nfs-common  # Debian/Ubuntu
sudo yum install nfs-utils   # RHEL/CentOS

# Create mount point
sudo mkdir -p /mnt/myshare

# Mount the share
sudo mount -t nfs this.tm:/myshare /mnt/myshare

# Or with explicit options
sudo mount -t nfs -o vers=3,tcp this.tm:/myshare /mnt/myshare
</code></pre>
<h3 id="macos">macOS</h3>
<pre><code class="language-bash"># Create mount point
sudo mkdir -p /Volumes/myshare

# Mount the share
sudo mount -t nfs this.tm:/myshare /Volumes/myshare
</code></pre>
<p>Or use Finder: Go → Connect to Server → <code>nfs://this.tm/myshare</code></p>
<h3 id="persistent-mounts">Persistent Mounts</h3>
<p><strong>Linux (<code>/etc/fstab</code>):</strong></p>
<pre><code class="language-text">this.tm:/myshare /mnt/myshare nfs vers=3,tcp,_netdev 0 0
</code></pre>
<p><strong>macOS (<code>/etc/fstab</code>):</strong></p>
<pre><code class="language-text">this.tm:/myshare /Volumes/myshare nfs vers=3,tcp 0 0
</code></pre>
<h2 id="authentication">Authentication</h2>
<div class="callout important">
  <div class="callout-title"><span>Important</span></div>
  <div class="callout-body"><p><strong>Certificate-based authentication</strong>: The NFS server authenticates using TLS client certificates, not
traditional NFS auth. This happens automatically when mounting from a mesh peer - your peer&#39;s identity
certificate is used. No additional setup required.</p></div>
</div>
<p>Authentication flow:</p>
<ol>
<li>Client connects with TLS certificate</li>
<li>Server extracts the user ID from the certificate&#39;s Common Name</li>
<li>RBAC is checked against the S3 authorizer</li>
<li>If authorized, the share is mounted</li>
</ol>
<h2 id="permissions">Permissions</h2>
<p>File share permissions are managed via RBAC in the Data tab of the admin panel:</p>
<table>
<thead>
<tr>
<th>Role</th>
<th>Permissions</th>
</tr>
</thead>
<tbody><tr>
<td><code>bucket-admin</code></td>
<td>Full read/write access</td>
</tr>
<tr>
<td><code>bucket-write</code></td>
<td>Read and write objects</td>
</tr>
<tr>
<td><code>bucket-read</code></td>
<td>Read-only access</td>
</tr>
</tbody></table>
<h3 id="default-permissions">Default Permissions</h3>
<p>When a file share is created:</p>
<ul>
<li>The creator gets <code>bucket-admin</code> on the share</li>
<li>If &quot;Allow guest user read&quot; is enabled (default), everyone gets <code>bucket-read</code></li>
</ul>
<h3 id="checking-access">Checking Access</h3>
<p>The mount will succeed with read-only access if you have <code>bucket-read</code>, or read-write access if you have <code>bucket-write</code>
or <code>bucket-admin</code>.</p>
<h2 id="file-shares-vs-buckets">File Shares vs Buckets</h2>
<p>File shares are a user-friendly abstraction over S3 buckets:</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>File Share</th>
<th>S3 Bucket</th>
</tr>
</thead>
<tbody><tr>
<td>Access</td>
<td>NFS mount + S3 API</td>
<td>S3 API only</td>
</tr>
<tr>
<td>Naming</td>
<td><code>myshare</code></td>
<td><code>fs+myshare</code></td>
</tr>
<tr>
<td>Creation</td>
<td>Admin panel, wizard</td>
<td>API only</td>
</tr>
<tr>
<td>Defaults</td>
<td>Auto permissions, quotas</td>
<td>Manual setup</td>
</tr>
<tr>
<td>Lifecycle</td>
<td>Expiry, tombstoning</td>
<td>Manual deletion</td>
</tr>
</tbody></table>
<p>File shares are backed by S3 buckets with a <code>fs+</code> prefix. The same data is accessible via both NFS and S3.</p>
<h2 id="supported-operations">Supported Operations</h2>
<p>The NFS server supports standard file operations:</p>
<table>
<thead>
<tr>
<th>Operation</th>
<th>Support</th>
</tr>
</thead>
<tbody><tr>
<td>Read files</td>
<td>✓</td>
</tr>
<tr>
<td>Write files</td>
<td>✓ (if authorized)</td>
</tr>
<tr>
<td>Create directories</td>
<td>✓</td>
</tr>
<tr>
<td>Delete files/dirs</td>
<td>✓</td>
</tr>
<tr>
<td>List directories</td>
<td>✓</td>
</tr>
<tr>
<td>Rename/move</td>
<td>✓</td>
</tr>
<tr>
<td>File attributes</td>
<td>Basic (size, timestamps)</td>
</tr>
</tbody></table>
<div class="callout warning">
  <div class="callout-title"><span>Warning</span></div>
  <div class="callout-body"><p><strong>Performance consideration</strong>: NFS is convenient for small files and browsing, but S3 API is faster for
large file transfers (supports multipart uploads). Use NFS for convenience, S3 for performance.</p></div>
</div>
<h3 id="limitations">Limitations</h3>
<ul>
<li>No hard links (S3 doesn&#39;t support them)</li>
<li>No symlinks</li>
<li>File locking is advisory only</li>
<li>Large file uploads may be slower than S3 (no multipart)</li>
</ul>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="mount-fails-with-permission-denied">Mount fails with &quot;Permission denied&quot;</h3>
<p>Check that:</p>
<ol>
<li>You&#39;re connecting from a mesh peer with valid identity</li>
<li>The file share exists (check admin panel)</li>
<li>You have at least <code>bucket-read</code> permission on the share</li>
</ol>
<pre><code class="language-bash"># Check your current user
tunnelmesh status

# Check available shares
 tunnelmesh buckets list | grep fs+ 
</code></pre>
<h3 id="mount-fails-with-connection-refused">Mount fails with &quot;Connection refused&quot;</h3>
<p>The NFS server only runs when file shares exist:</p>
<ol>
<li>Create a file share via the admin panel</li>
<li>Wait a moment for the NFS server to start</li>
<li>Retry the mount</li>
</ol>
<h3 id="slow-performance">Slow performance</h3>
<p>For better performance:</p>
<ul>
<li>Use S3 API for large file transfers</li>
<li>Mount with <code>rsize=65536,wsize=65536</code> for larger block sizes</li>
<li>Consider using the S3 Explorer in the admin panel for browsing</li>
</ul>
<h3 id="file-not-visible-after-s3-upload">File not visible after S3 upload</h3>
<p>NFS caches directory listings. Force a refresh:</p>
<pre><code class="language-bash">ls -la /mnt/myshare  # Triggers cache refresh
</code></pre>
<p>Or remount:</p>
<pre><code class="language-bash">sudo umount /mnt/myshare &amp;&amp; sudo mount ...
</code></pre>
<h2 id="security">Security</h2>
<ul>
<li>All NFS traffic is encrypted via TLS</li>
<li>Authentication uses the same certificates as other mesh services</li>
<li>Authorisation is enforced per-operation via RBAC</li>
<li>The NFS server is only accessible from within the mesh</li>
</ul>
<h2 id="api-reference">API Reference</h2>
<h3 id="list-mounts">List Mounts</h3>
<p>The NFS server exposes each file share as a mountable path:</p>
<ul>
<li><code>/sharename</code> - Mount the entire share</li>
<li><code>/sharename/subdir</code> - Mount a specific subdirectory</li>
</ul>
<h3 id="port">Port</h3>
<p>The NFS server runs on port 2049 (TCP) on the coordinator&#39;s mesh IP.</p>
<h2 id="related-documentation">Related Documentation</h2>
<ul>
<li><a href="S3_STORAGE.md">S3 Storage</a> - S3 API access to the same storage</li>
<li><a href="USER_IDENTITY.md">User Identity</a> - Certificate-based authentication</li>
<li><a href="GETTING_STARTED.md">Getting Started</a> - Initial setup</li>
</ul>
<hr>
<p><em>TunnelMesh is released under the <a href="https://github.com/tunnelmesh/tunnelmesh/blob/main/LICENSE">AGPL-3.0 License</a>.</em></p>
</article>
        <nav id="doc-pagination" class="doc-pagination" aria-label="Document navigation"></nav>
      </div>
    </main>

    <!-- Right page TOC -->
    <aside class="page-toc" id="page-toc" aria-label="Page contents">
      <div class="page-toc-label">On this page</div>
      <nav id="page-toc-nav" class="page-toc-nav"></nav>
    </aside>

  </div>

  <!-- ══ BLOG VIEW ══ -->
  <div class="view hidden" id="view-blog">
    <main class="blog-main" id="blog-main" aria-live="polite">
      <div class="doc-loading">
        <div class="loading-spinner"></div>
        <span>Loading…</span>
      </div>
    </main>
  </div>

</div>

<!-- ── Footer ── -->
<footer class="site-footer">
  <p>© 2026 FORGE3D CYF. Registered in Wales, Company No. 16891098.</p>
</footer>

<!-- ── Scripts ── -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/marked/9.1.6/marked.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/powershell.min.js"></script>
<script src="/js/app.js"></script>
<script>window.__PRERENDERED = {"type":"doc","id":"NFS"};</script>
</body>
</html>
